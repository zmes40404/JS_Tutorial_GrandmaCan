<!DOCTYPE html>
<html>
    <head>
        <title>測驗</title>
        <style>
            button{
                font-size:25px;
                margin-right:10px;
            }
            p{
                font-size: 25px;
                display: inline-block;
                margin-right:10px;
            }
            img{
                height: 200px;
                display: block;
                margin-top:50px;
            }
        </style>
    </head>
    <body>
        <button onclick="
            console.log(cart.totalPrice);
        ">購物車總額</button>
        <button onclick="
            cart.productNum = 0;
            cart.product1.num = 0;
            cart.product2.num = 0;
            cart.totalPrice = 0;
            console.log('已清空購物車');
            cart.showCart();
        ">清空購物車</button>

        <img src="product_images/product_image1.jpg">
        <p>$100</p>
        <button onclick="
            cart.productNum++;
            cart.product1.num++;
            cart.totalPrice += 100;
            cart.showCart();
        ">加入購物車</button>

        <img src="product_images/product_image2.jpg">
        <p>$200</p>
        <button onclick="
            cart.productNum++;
            cart.product2.num++;
            cart.totalPrice += 200; /* = 'totalPrice += 200', */
            cart.showCart();
        ">加入購物車</button>
        

        <script>
           let cart = {     // 變數的資料只要網頁關掉或重新整理，就會不見或歸零
                productNum: 0,
                // 物件中的value可以再加入物件
                product1: {
                    num: 0,
                    name: "海底撈泡麵",
                    price: 100
                },
                product2: {
                    num: 0,
                    name: "養氣人蔘",
                    price: 200
                },
                totalPrice: 0,
                // 物件中的value也可以是function, 物件中的函數 -> 方法
                showCart: function showCart() {
                    console.log(`目前商品數: ${cart.productNum}`);
                    console.log(`${cart.product1.name}: ${cart.product1.num}`);
                    console.log(`${cart.product2.name}: ${cart.product2.num}`);
                    console.log(`目前購物車總額: ${cart.totalPrice}`);
                }
           };

           // JS內建的兩個物件: localStorage, JSON
           // localStorage 
        //    localStorage.setItem("price", 1000);     // 將1000的值存為"price"這個名稱, 注意!!儲存在瀏覽器中的資料只能是字串->其他的型態都會轉為字串後再進行儲存
        //    console.log(localStorage.getItem("price"));

        //    localStorage.setItem("price", 2000);     // 如果是相同的key，則會被更新value
        //    localStorage.removeItem("price");

           // JSON
           const jsonCart = JSON.stringify(cart);   // object中的方法再轉為JSON格式後會自動被拿掉
           console.log(jsonCart);   // jsonCart是一個string

           console.log(JSON.parse(jsonCart));   // "JSON.parse()"是將JSON格式轉為JS物件

           // 要把物件給儲存在localStorage中-> 先把物件轉成JSON字串，使用localStorage儲存
           let jsonCart1 = JSON.stringify(cart);
           localStorage.setItem("cart", jsonCart1);
           
           // 將localStorage轉為物件使用-> 注意!! JS物件中的方法是一定會被丟失的
           let cart1 = localStorage.getItem("cart");
           cart1 = JSON.cart1;
           console.log(cart1);
        </script>
    </body>
</html>
